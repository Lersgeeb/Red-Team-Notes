# BasicPentest

## Detalles máquina 
- **H1.** La maquina tiene 6 puertos abiertos: 22,80,139,445,8009,8080`
- **H2.** Después de un escaneo detallado de los puertos se obtiene que:
    - Servicio de OpenSSH 7.2p en el puerto 22
    - Servicio de Apache httpd 2.4.18 en el puerto 80
    - Servicio de Samba smbd 3.X - 4.X en el puerto 139
    - Servicio de Samba smbd 3.X - 4.X en el puerto 445
    - Servicio de Apache  Jserv en el puerto 8009
    - Servicio de Apache Tomcat 9.0.7 en el puerto 8080
- **H3.** A través de una enumeración de rutas en los servicios web se encuentra la existencia de http://10.10.222.120/development/
- **H4.** La ruta brinda información sobre credenciales inseguras de un usuario 'J' y la existencia de un usuario 'K'
- **H5.** La ruta también brinda información de la version de Apache usada (Apache struts 2.5.12 ) y el uso de la api que viene como ejemplo.
- **H6.** Se hace una enumeración del servicio de Samba para intentar obtener nombres de usuario mencionados en `H4`.
- **H7.** se obtiene los nombres de `Jan` y `Kay`.
- **H8.** Mediante fuerza bruta se intenta acceder al servicio ssh del usuario `Jan` debido a lo mencionado en el `H4`.
- **H9.** Se obtiene que la contraseña de `Jan` es `armando`
- **H10.** Con el usuario de `Jan` y su contraseña(`H9`) se puede acceder a la maquina con `ssh`.
- **H11.**  Se accede a la carpeta del usuario `Kay` si es posible en busca de credenciales o información relevante para llevar a cabo la escalación de privilegios.
- **H12.** Se obtiene la llave `id_rsa` del directorio de kay y se guarda en el sistema del atacante.
- **H13.** se hace uso de `ssh2john` y `john` para conseguir las credenciales de `Kay`
- **H14.** Se obtiene que la contraseña de `Kay` es `beeswax`
- **H15.** Con el usuario de `Kay` y su contraseña(`H14`) se puede acceder a la maquina con `ssh`.

## Comandos útiles

Enumeración de rutas ocultas (H3): 
> `gobuster dir -w /usr/share/wordlists/dirb/common.txt -u <HOST>`

Enumeración del servicio de smb (H6)
> `enum4linux 10.10.222.120 > enum_result.txt`

Acceder al servicio SSH mediante fuerza bruta (H8):
> `hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.222.120 -t 4`

convertir clave SSH privada en format de john (13)
> `python3 /opt/john/ssh2john.py id_rsa.txt > decrypted.txt`

Descifrar la clave para la frase de contraseña (H14):
> `john --wordlist=/usr/share/wordlists/rockyou.txt decrypted.txt`

Obtener información del equipo
> `uname -a`